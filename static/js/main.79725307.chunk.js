(this.webpackJsonpleaderboard=this.webpackJsonpleaderboard||[]).push([[0],{20:function(e,t,n){e.exports=n(42)},26:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(16),o=n.n(c),i=(n(25),n(26),n(1)),l=n.n(i),s=n(5),u=n(2),d=n(19),m=n(17),f=n(10),b=n(18),h=n.n(b),p=n(45),w=n(44),v=n(11),g=n.n(v),j=n(7),O=n.n(j),E=(n(41),function(e,t){var n=Object(a.useRef)(e);Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){var e=setInterval((function(){n.current()}),t);return function(){return clearTimeout(e)}}),[n,t])});function S(){var e="object"===typeof window;return{width:e?window.innerWidth:void 0,height:e?window.innerHeight:void 0}}var k=function(e){if(!(window.matchMedia&&(window.matchMedia("only screen and (min-resolution: 124dpi), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 48.8dpcm)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (min-device-pixel-ratio: 1.3)").matches)||window.devicePixelRatio&&window.devicePixelRatio>1.3))return e;var t=e.split("."),n=t.pop(),a=t.join(".");return n?"".concat(a,"@2x.").concat(n):e};var y=function(e){var t=e.baseURL,n=e.setError,c=Object(a.useState)(0),o=Object(u.a)(c,2),i=o[0],d=o[1],b=Object(a.useState)(1),v=Object(u.a)(b,2),j=v[0],y=v[1],x=Object(a.useState)([]),N=Object(u.a)(x,2),C=N[0],L=N[1],B=Object(a.useState)(!1),U=Object(u.a)(B,2),M=U[0],R=U[1],A=Object(a.useRef)(null),F=Object(a.useCallback)(Object(s.a)(l.a.mark((function e(){var a,r,c,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(t,"/api/scores/"));case 3:if(200!==(a=e.sent).status){e.next=18;break}return e.t0=h.a,e.next=8,a.json();case 8:e.t1=e.sent,e.t2={deep:!0},r=(0,e.t0)(e.t1,e.t2),c=new Date,o=r.map((function(e){var t=Object(p.a)(e.modified),n=t>Object(p.a)(e.created)&&Object(w.a)(c,t)<2592e3;return Object(m.a)({},e,{gameBannerThumbnail:k(e.gameBannerThumbnail),newScore:n})})),L(o),n(null),o.map((function(e){var t=e.gameBannerThumbnail,n=new Image;return n.src=t,n})),e.next=22;break;case 18:return e.next=20,a.text();case 20:i=e.sent,n("Failed to get scores: "+i);case 22:e.next=27;break;case 24:e.prev=24,e.t3=e.catch(0),n("Failed to get scores: "+e.t3);case 27:case"end":return e.stop()}}),e,null,[[0,24]])}))),[t,L,n]),I=Object(a.useCallback)((function(){M&&F()}),[M,F]);E(I,3e4),Object(a.useEffect)((function(){F()}),[F]);var T=Object(a.useCallback)((function(){var e=i+j,t=e>=C.length?0:e;t!==i&&d(t)}),[i,j,C,d]);E(T,15e3),Object(a.useEffect)((function(){return O.a.bind("space",T),O.a.bind("enter",T),O.a.bind("right",T),function(){O.a.unbind("space"),O.a.unbind("enter"),O.a.unbind("right")}}),[T]);var H=function(){var e=Object(a.useState)(S),t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){if("object"===typeof window)return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)};function e(){r(S())}}),[]),n}();return Object(a.useLayoutEffect)((function(){H.width&&H.width>1e3?(y(1),R(!0)):R(!1)}),[H,y,R]),Object(a.useLayoutEffect)((function(){var e;if(A.current)if((H.width||0)<1e3)y(C.length);else{var t=A.current.clientHeight,n=null===(e=A.current.firstChild)||void 0===e?void 0:e.firstChild;if(n){var a=Math.floor(t/(n.clientHeight+1));j!==a&&y(a)}}}),[j,y,A,C,H]),r.a.createElement("div",{className:"scoresContainer",ref:A},r.a.createElement("div",{className:"scores"},C.slice(i,i+j).map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},0!==t&&r.a.createElement("span",{className:"line"}),r.a.createElement("span",{className:g()("gameName",{newScore:e.newScore})},r.a.createElement("img",{src:e.gameBannerThumbnail,alt:e.gameName})),r.a.createElement("span",{className:g()("playerName",{newScore:e.newScore})},r.a.createElement(f.a,{className:g()("darkBordered","L"),chars:f.b.ALPHANUM+",.!?",length:12,value:e.playerName,timing:30}),r.a.createElement(f.a,{className:g()("darkBordered","L"),chars:f.b.NUM+",",length:8,value:Number(e.playerScore).toLocaleString(),timing:3})))}))))};var x=function(){var e=Object(d.a)(),t=e.handleSubmit,n=e.register,c=e.setValue,o=Object(a.useState)(null),i=Object(u.a)(o,2),m=i[0],f=i[1],b=Object(a.useState)(!1),h=Object(u.a)(b,2),p=h[0],w=h[1],v=function(e,t){var n=Object(a.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(m){return console.log(m),t}})),r=Object(u.a)(n,2),c=r[0],o=r[1];return[c,function(t){try{o(t),window.localStorage.setItem(e,JSON.stringify(t))}catch(m){console.log(m)}}]}("leaderboardUrl","https://btta-api.elwert.cloud"),g=Object(u.a)(v,2),j=g[0],O=g[1],E=Object(a.useCallback)(t(function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.leaderboardUrl=t.url,w(!0),fetch("".concat(t.url,"/api/scores/")).then((function(e){200===e.status?(f(null),O(t.url)):f("Unexpected status code: ".concat(e.status))})).catch((function(e){f("Connection error: ".concat(e))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),[t,O,w]),S=Object(a.useCallback)((function(){w(!1),window.requestAnimationFrame((function(){c("url",j)}))}),[w,c,j]);return Object(a.useEffect)((function(){j&&w(!0)}),[]),r.a.createElement("div",{className:"App"},r.a.createElement("header",{onClick:S},r.a.createElement("img",{className:"logo",src:"logo.png",alt:"Back to the Arcade"}),r.a.createElement("img",{className:"leaderboard",src:"leaderboard-text.png",alt:"Leaderboard"})),m&&r.a.createElement("div",null,r.a.createElement("h2",null,"Error:"),m),p?r.a.createElement(y,{baseURL:j,setError:f}):r.a.createElement(r.a.Fragment,null,"URL: ",r.a.createElement("input",{name:"url",ref:n}),r.a.createElement("button",{onClick:E},"Connect")),r.a.createElement("footer",null,r.a.createElement("img",{src:"pacman-ghosts.jpg",alt:""})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.79725307.chunk.js.map