(this.webpackJsonpleaderboard=this.webpackJsonpleaderboard||[]).push([[0],{17:function(e,t,n){e.exports=n(36)},23:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),o=n.n(c),i=(n(22),n(23),n(1)),s=n.n(i),u=n(4),l=n(3),f=n(16),d=n(14),m=n(15),b=n.n(m),p=n(8),v=n.n(p),h=n(5),w=n.n(h),E=function(e,t){var n=Object(a.useRef)(e);Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){var e=setInterval((function(){n.current()}),t);return function(){return clearTimeout(e)}}),[n,t])};function j(){var e="object"===typeof window;return{width:e?window.innerWidth:void 0,height:e?window.innerHeight:void 0}}var g=function(e){var t=e.baseURL,n=e.setError,c=Object(a.useState)(0),o=Object(l.a)(c,2),i=o[0],f=o[1],m=Object(a.useState)(1),p=Object(l.a)(m,2),h=p[0],g=p[1],O=Object(a.useState)([]),S=Object(l.a)(O,2),k=S[0],N=S[1],x=Object(a.useRef)(null),y=Object(a.useCallback)(Object(u.a)(s.a.mark((function e(){var a,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(t,"/api/scores/"));case 3:if(200!==(a=e.sent).status){e.next=15;break}return e.t0=b.a,e.next=8,a.json();case 8:e.t1=e.sent,e.t2={deep:!0},r=(0,e.t0)(e.t1,e.t2),N(r.map((function(e){return Object(d.a)({},e,{newScore:Math.random()>=.8})}))),n(null),e.next=19;break;case 15:return e.next=17,a.text();case 17:c=e.sent,n("Failed to get scores: "+c);case 19:e.next=24;break;case 21:e.prev=21,e.t3=e.catch(0),n("Failed to get scores: "+e.t3);case 24:case"end":return e.stop()}}),e,null,[[0,21]])}))),[t,N,n]);E(y,3e4),Object(a.useEffect)((function(){y()}),[y]);var C=Object(a.useCallback)((function(){var e=i+h,t=e>=k.length?0:e;t!==i&&f(t)}),[i,h,k,f]);E(C,1e4),Object(a.useEffect)((function(){return w.a.bind("space",C),w.a.bind("enter",C),w.a.bind("right",C),function(){w.a.unbind("space"),w.a.unbind("enter"),w.a.unbind("right")}}),[C]);var L=function(){var e=Object(a.useState)(j),t=Object(l.a)(e,2),n=t[0],r=t[1],c="object"===typeof window;return Object(a.useEffect)((function(){if(c)return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)};function e(){r(j())}}),[]),n}();return Object(a.useLayoutEffect)((function(){g(1)}),[L,g]),Object(a.useLayoutEffect)((function(){var e;if(x.current){var t=x.current.clientHeight,n=null===(e=x.current.firstChild)||void 0===e?void 0:e.firstChild;if(n){var a=Math.floor(t/n.clientHeight);h!==a&&g(a)}}}),[h,g,x,k,L]),r.a.createElement("div",{className:"scoresContainer",ref:x},r.a.createElement("div",{className:"scores"},k.slice(i,i+h).map((function(e,t){return r.a.createElement(r.a.Fragment,{key:e.id},0!==t&&r.a.createElement("span",{className:"line"}),r.a.createElement("span",{className:v()("gameName",{newScore:e.newScore})},r.a.createElement("img",{src:e.gameBannerThumbnail,alt:e.gameName})),r.a.createElement("span",{className:v()("playerName",{newScore:e.newScore})},e.playerName),r.a.createElement("span",{className:v()("score",{newScore:e.newScore})},Number(e.playerScore).toLocaleString()))}))))};var O=function(){var e=Object(f.a)(),t=e.handleSubmit,n=e.register,c=e.setValue,o=Object(a.useState)(null),i=Object(l.a)(o,2),d=i[0],m=i[1],b=Object(a.useState)(null),p=Object(l.a)(b,2),v=p[0],h=p[1],w=Object(a.useCallback)(t(function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.leaderboardUrl=t.url,fetch("".concat(t.url,"/api/scores/")).then((function(e){200===e.status?(m(null),h(t.url)):m("Unexpected status code: ".concat(e.status))})).catch((function(e){m("Connection error: ".concat(e))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),[t,h]),E=Object(a.useCallback)((function(){h(null),v&&window.requestAnimationFrame((function(){c("url",v)}))}),[h,c,v]);return Object(a.useEffect)((function(){var e=localStorage.leaderboardUrl||"";c("url",e),e&&h(e)}),[c,h]),r.a.createElement("div",{className:"App"},r.a.createElement("header",{onClick:E},r.a.createElement("img",{className:"logo",src:"logo.png",alt:"Back to the Arcade"}),r.a.createElement("img",{className:"leaderboard",src:"leaderboard-text.png",alt:"Leaderboard"})),d&&r.a.createElement("div",null,r.a.createElement("h2",null,"Error:"),d),v?r.a.createElement(g,{baseURL:v,setError:m}):r.a.createElement(r.a.Fragment,null,"URL: ",r.a.createElement("input",{name:"url",ref:n}),r.a.createElement("button",{onClick:w},"Connect")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.110a165a.chunk.js.map