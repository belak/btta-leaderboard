(this.webpackJsonpleaderboard=this.webpackJsonpleaderboard||[]).push([[0],{18:function(e,t,a){e.exports=a(37)},24:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),o=a.n(c),l=(a(23),a(24),a(1)),s=a.n(l),u=a(4),i=a(3),m=a(17),f=a(15),b=a(16),d=a.n(b),p=a(39),h=a(40),v=a(9),E=a.n(v),j=a(6),g=a.n(j),O=function(e,t){var a=Object(n.useRef)(e);Object(n.useEffect)((function(){a.current=e}),[e]),Object(n.useEffect)((function(){var e=setInterval((function(){a.current()}),t);return function(){return clearTimeout(e)}}),[a,t])};var w=function(e){var t=e.baseURL,a=e.setError,c=Object(n.useState)(0),o=Object(i.a)(c,2),l=o[0],m=o[1],b=Object(n.useState)(1),v=Object(i.a)(b,2),j=v[0],w=v[1],S=Object(n.useState)([]),k=Object(i.a)(S,2),N=k[0],x=k[1],C=Object(n.useRef)(null),y=Object(n.useCallback)(Object(u.a)(s.a.mark((function e(){var n,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(t,"/api/scores"));case 3:if(200!==(n=e.sent).status){e.next=15;break}return e.t0=d.a,e.next=8,n.json();case 8:e.t1=e.sent,e.t2={deep:!0},r=(0,e.t0)(e.t1,e.t2),x(r.map((function(e){return Object(f.a)({},e,{newScore:Object(p.a)(new Date,Object(h.a)(e.modified))<2592e3})}))),a(null),e.next=19;break;case 15:return e.next=17,n.text();case 17:c=e.sent,a("Failed to get scores: "+c);case 19:e.next=24;break;case 21:e.prev=21,e.t3=e.catch(0),a("Failed to get scores: "+e.t3);case 24:case"end":return e.stop()}}),e,null,[[0,21]])}))),[t,x,a]);O(y,3e4),Object(n.useEffect)((function(){y()}),[y]);var U=Object(n.useCallback)((function(){var e=l+j,t=e>=N.length?0:e;t!==l&&m(t)}),[l,j,N,m]);return O(U,1e4),Object(n.useEffect)((function(){return g.a.bind("space",U),g.a.bind("enter",U),g.a.bind("right",U),function(){g.a.unbind("space"),g.a.unbind("enter"),g.a.unbind("right")}}),[U]),Object(n.useEffect)((function(){var e;if(C.current){var t=C.current.clientHeight,a=null===(e=C.current.firstChild)||void 0===e?void 0:e.firstChild;if(a){var n=Math.floor(t/a.clientHeight);j!==n&&w(n)}}}),[j,w,C,N]),r.a.createElement("div",{className:"scoresContainer",ref:C},r.a.createElement("div",{className:"scores"},N.slice(l,l+j).map((function(e,t){return r.a.createElement(r.a.Fragment,{key:e.id},0!==t&&r.a.createElement("span",{className:"line"}),r.a.createElement("span",{className:E()("gameName",{newScore:e.newScore})},r.a.createElement("img",{src:e.gameBanner,alt:e.gameName})),r.a.createElement("span",{className:E()("playerName",{newScore:e.newScore})},e.playerName),r.a.createElement("span",{className:E()("score",{newScore:e.newScore})},Number(e.playerScore).toLocaleString()))}))))};var S=function(){var e=Object(m.a)(),t=e.handleSubmit,a=e.register,c=e.setValue,o=Object(n.useState)(null),l=Object(i.a)(o,2),f=l[0],b=l[1],d=Object(n.useState)(null),p=Object(i.a)(d,2),h=p[0],v=p[1],E=Object(n.useCallback)(t(function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.leaderboardUrl=t.url,fetch("".concat(t.url,"/api/scores")).then((function(e){200===e.status?(b(null),v(t.url)):b("Unexpected status code: ".concat(e.status))})).catch((function(e){b("Connection error: ".concat(e))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),[t,v]),j=Object(n.useCallback)((function(){v(null),h&&window.requestAnimationFrame((function(){c("url",h)}))}),[v,c,h]);return Object(n.useEffect)((function(){var e=localStorage.leaderboardUrl||"";c("url",e),e&&v(e)}),[c,v]),r.a.createElement("div",{className:"App"},r.a.createElement("header",{onClick:j},r.a.createElement("img",{className:"logo",src:"logo.png",alt:"Back to the Arcade"}),r.a.createElement("img",{className:"leaderboard",src:"leaderboard-text.png",alt:"Leaderboard"})),f&&r.a.createElement("div",null,r.a.createElement("h2",null,"Error:"),f),h?r.a.createElement(w,{baseURL:h,setError:b}):r.a.createElement(r.a.Fragment,null,"URL: ",r.a.createElement("input",{name:"url",ref:a}),r.a.createElement("button",{onClick:E},"Connect")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.8c9e988e.chunk.js.map